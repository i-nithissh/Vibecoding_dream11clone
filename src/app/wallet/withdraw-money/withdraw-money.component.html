<app-navbar></app-navbar>

<div class="container">
  <div class="page-header">
    <h1>Withdraw Money</h1>
    <p>Withdraw your winnings to your bank account</p>
  </div>

  <div class="withdraw-content">
    <div class="balance-info">
      <div class="balance-card">
        <div class="balance-header">
          <h3>Available for Withdrawal</h3>
          <div class="balance-amount">₹{{walletBalance}}</div>
        </div>
        <div class="balance-note">
          <p>Only winnings can be withdrawn. Deposited amount and bonus cannot be withdrawn.</p>
        </div>
      </div>
    </div>

    <div class="withdrawal-form">
      <form (ngSubmit)="requestWithdrawal()" #withdrawForm="ngForm">
        <div class="form-section">
          <h3>Withdrawal Details</h3>
          
          <div class="form-group">
            <label for="amount">Amount to Withdraw</label>
            <input 
              type="number" 
              id="amount"
              name="amount"
              [(ngModel)]="withdrawalData.amount"
              placeholder="Enter amount (min ₹50)"
              min="50"
              [max]="walletBalance"
              required
            />
            <div class="error-message" *ngIf="errors.amount">
              {{errors.amount}}
            </div>
          </div>
        </div>

        <div class="form-section">
          <h3>Bank Account Details</h3>
          
          <div class="form-group">
            <label for="accountHolderName">Account Holder Name</label>
            <input 
              type="text" 
              id="accountHolderName"
              name="accountHolderName"
              [(ngModel)]="withdrawalData.accountHolderName"
              placeholder="Enter account holder name"
              required
            />
            <div class="error-message" *ngIf="errors.accountHolderName">
              {{errors.accountHolderName}}
            </div>
          </div>

          <div class="form-group">
            <label for="accountNumber">Account Number</label>
            <input 
              type="text" 
              id="accountNumber"
              name="accountNumber"
              [(ngModel)]="withdrawalData.accountNumber"
              placeholder="Enter account number"
              required
            />
            <div class="error-message" *ngIf="errors.accountNumber">
              {{errors.accountNumber}}
            </div>
          </div>

          <div class="form-group">
            <label for="ifscCode">IFSC Code</label>
            <input 
              type="text" 
              id="ifscCode"
              name="ifscCode"
              [(ngModel)]="withdrawalData.ifscCode"
              placeholder="Enter IFSC code (e.g., SBIN0001234)"
              style="text-transform: uppercase"
              required
            />
            <div class="error-message" *ngIf="errors.ifscCode">
              {{errors.ifscCode}}
            </div>
          </div>
        </div>

        <div class="withdrawal-summary">
          <h3>Withdrawal Summary</h3>
          
          <div class="summary-details">
            <div class="summary-row">
              <span>Withdrawal amount:</span>
              <span class="amount">₹{{withdrawalData.amount || 0}}</span>
            </div>
            <div class="summary-row">
              <span>Processing fee:</span>
              <span class="fee">₹0</span>
            </div>
            <div class="summary-row total">
              <span>You will receive:</span>
              <span class="amount">₹{{withdrawalData.amount || 0}}</span>
            </div>
          </div>

          <div class="withdrawal-notes">
            <h4>Important Notes:</h4>
            <ul>
              <li>Withdrawal requests are processed within 1-3 business days</li>
              <li>Minimum withdrawal amount is ₹50</li>
              <li>Only winnings can be withdrawn</li>
              <li>Ensure bank details are correct to avoid delays</li>
            </ul>
          </div>

          <button 
            type="submit" 
            class="btn btn-primary withdraw-btn"
            [disabled]="isProcessing"
          >
            <span *ngIf="!isProcessing">Request Withdrawal</span>
            <span *ngIf="isProcessing">Processing Request...</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>