<app-navbar></app-navbar>

<div class="container">
  <div class="page-header">
    <h1>Match Management</h1>
    <p>Create, update, and manage cricket matches</p>
  </div>

  <div class="action-buttons">
    <button 
      class="btn btn-primary" 
      (click)="showAddForm = !showAddForm"
    >
      {{showAddForm ? 'Cancel' : 'Add New Match'}}
    </button>
  </div>

  <!-- Add Match Form -->
  <div class="add-match-form" *ngIf="showAddForm">
    <h3>Add New Match</h3>
    <form (ngSubmit)="addMatch()" #matchForm="ngForm">
      <div class="grid grid-2">
        <div class="form-group">
          <label for="team1">Team 1</label>
          <select 
            id="team1" 
            [(ngModel)]="newMatch.team1"
            name="team1"
            required
          >
            <option value="">Select Team 1</option>
            <option *ngFor="let team of teams" [value]="team">{{team}}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="team2">Team 2</label>
          <select 
            id="team2" 
            [(ngModel)]="newMatch.team2"
            name="team2"
            required
          >
            <option value="">Select Team 2</option>
            <option *ngFor="let team of teams" [value]="team">{{team}}</option>
          </select>
        </div>
      </div>

      <div class="grid grid-2">
        <div class="form-group">
          <label for="date">Date & Time</label>
          <input 
            type="datetime-local" 
            id="date" 
            [(ngModel)]="newMatch.date"
            name="date"
            required
          />
        </div>

        <div class="form-group">
          <label for="venue">Venue</label>
          <input 
            type="text" 
            id="venue" 
            [(ngModel)]="newMatch.venue"
            name="venue"
            placeholder="Enter venue"
            required
          />
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Add Match</button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()">Reset</button>
      </div>
    </form>
  </div>

  <!-- Matches List -->
  <div class="matches-table">
    <div class="table-header">
      <div class="header-cell">Teams</div>
      <div class="header-cell">Date & Time</div>
      <div class="header-cell">Venue</div>
      <div class="header-cell">Status</div>
      <div class="header-cell">Actions</div>
    </div>

    <div class="table-body">
      <div class="table-row" *ngFor="let match of matches">
        <!-- Edit Form Row -->
        <div class="edit-form" *ngIf="editingMatch?.id === match.id">
          <div class="edit-content">
            <div class="grid grid-2">
              <div class="form-group">
                <label>Team 1</label>
                <select [(ngModel)]="editingMatch.team1">
                  <option *ngFor="let team of teams" [value]="team">{{team}}</option>
                </select>
              </div>

              <div class="form-group">
                <label>Team 2</label>
                <select [(ngModel)]="editingMatch.team2">
                  <option *ngFor="let team of teams" [value]="team">{{team}}</option>
                </select>
              </div>
            </div>

            <div class="grid grid-2">
              <div class="form-group">
                <label>Date & Time</label>
                <input type="datetime-local" [(ngModel)]="editingMatch.date" />
              </div>

              <div class="form-group">
                <label>Venue</label>
                <input type="text" [(ngModel)]="editingMatch.venue" />
              </div>
            </div>

            <div class="form-group">
              <label>Status</label>
              <select [(ngModel)]="editingMatch.status">
                <option value="UPCOMING">Upcoming</option>
                <option value="LIVE">Live</option>
                <option value="COMPLETED">Completed</option>
                <option value="CANCELLED">Cancelled</option>
              </select>
            </div>

            <div class="edit-actions">
              <button class="btn btn-primary" (click)="updateMatch()">Update</button>
              <button class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
            </div>
          </div>
        </div>

        <!-- Regular Row -->
        <div class="row-content" *ngIf="editingMatch?.id !== match.id">
          <div class="cell teams-cell">
            <div class="teams">{{match.team1}} vs {{match.team2}}</div>
          </div>

          <div class="cell">
            <div class="match-date">{{match.date | date:'medium'}}</div>
          </div>

          <div class="cell">
            <div class="venue">{{match.venue}}</div>
          </div>

          <div class="cell">
            <span class="status-badge" [class]="getStatusClass(match.status)">
              {{match.status}}
            </span>
          </div>

          <div class="cell actions-cell">
            <button class="btn btn-sm btn-secondary" (click)="editMatch(match)">
              Edit
            </button>
            <button class="btn btn-sm btn-danger" (click)="deleteMatch(match.id)">
              Delete
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="matches.length === 0">
    <h3>No matches found</h3>
    <p>Add your first match to get started</p>
  </div>
</div>