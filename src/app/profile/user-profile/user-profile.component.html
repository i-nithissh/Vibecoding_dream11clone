<app-navbar></app-navbar>

<div class="container">
  <div class="page-header">
    <h1>My Profile</h1>
    <p>Manage your account settings and view your statistics</p>
  </div>

  <div class="profile-tabs">
    <button 
      class="tab-button"
      [class.active]="activeTab === 'profile'"
      (click)="setActiveTab('profile')"
    >
      Profile Info
    </button>
    <button 
      class="tab-button"
      [class.active]="activeTab === 'stats'"
      (click)="setActiveTab('stats')"
    >
      My Statistics
    </button>
    <button 
      class="tab-button"
      [class.active]="activeTab === 'security'"
      (click)="setActiveTab('security')"
    >
      Security
    </button>
  </div>

  <!-- Profile Info Tab -->
  <div class="tab-content" *ngIf="activeTab === 'profile'">
    <div class="profile-card">
      <h3>Personal Information</h3>
      
      <form (ngSubmit)="updateProfile()" #profileForm="ngForm">
        <div class="grid grid-2">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input 
              type="text" 
              id="firstName"
              name="firstName"
              [(ngModel)]="profileData.firstName"
              required
            />
            <div class="error-message" *ngIf="errors.firstName">
              {{errors.firstName}}
            </div>
          </div>

          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input 
              type="text" 
              id="lastName"
              name="lastName"
              [(ngModel)]="profileData.lastName"
              required
            />
            <div class="error-message" *ngIf="errors.lastName">
              {{errors.lastName}}
            </div>
          </div>
        </div>

        <div class="grid grid-2">
          <div class="form-group">
            <label for="email">Email Address</label>
            <input 
              type="email" 
              id="email"
              name="email"
              [(ngModel)]="profileData.email"
              required
            />
            <div class="error-message" *ngIf="errors.email">
              {{errors.email}}
            </div>
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input 
              type="tel" 
              id="phone"
              name="phone"
              [(ngModel)]="profileData.phone"
              required
            />
          </div>
        </div>

        <div class="grid grid-2">
          <div class="form-group">
            <label for="dateOfBirth">Date of Birth</label>
            <input 
              type="date" 
              id="dateOfBirth"
              name="dateOfBirth"
              [(ngModel)]="profileData.dateOfBirth"
            />
          </div>

          <div class="form-group">
            <label for="city">City</label>
            <input 
              type="text" 
              id="city"
              name="city"
              [(ngModel)]="profileData.city"
              placeholder="Enter your city"
            />
          </div>
        </div>

        <div class="form-group">
          <label for="state">State</label>
          <select 
            id="state"
            name="state"
            [(ngModel)]="profileData.state"
          >
            <option value="">Select State</option>
            <option value="Maharashtra">Maharashtra</option>
            <option value="Delhi">Delhi</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Gujarat">Gujarat</option>
          </select>
        </div>

        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="isLoading"
        >
          <span *ngIf="!isLoading">Update Profile</span>
          <span *ngIf="isLoading">Updating...</span>
        </button>
      </form>
    </div>
  </div>

  <!-- Statistics Tab -->
  <div class="tab-content" *ngIf="activeTab === 'stats'">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üèÜ</div>
        <div class="stat-value">{{stats.totalContests}}</div>
        <div class="stat-label">Total Contests</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ü•á</div>
        <div class="stat-value">{{stats.contestsWon}}</div>
        <div class="stat-label">Contests Won</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-value">‚Çπ{{stats.totalEarnings}}</div>
        <div class="stat-label">Total Earnings</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-value">#{{stats.currentRank}}</div>
        <div class="stat-label">Current Rank</div>
      </div>
    </div>

    <div class="achievements">
      <h3>Recent Achievements</h3>
      <div class="achievement-list">
        <div class="achievement-item">
          <div class="achievement-icon">üèÜ</div>
          <div class="achievement-details">
            <div class="achievement-title">Top 10 Finish</div>
            <div class="achievement-desc">Finished in top 10 in Mega Contest</div>
            <div class="achievement-date">2 days ago</div>
          </div>
        </div>
        
        <div class="achievement-item">
          <div class="achievement-icon">üíé</div>
          <div class="achievement-details">
            <div class="achievement-title">First Win</div>
            <div class="achievement-desc">Won your first contest</div>
            <div class="achievement-date">1 week ago</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Security Tab -->
  <div class="tab-content" *ngIf="activeTab === 'security'">
    <div class="security-card">
      <h3>Change Password</h3>
      
      <form (ngSubmit)="changePassword()" #passwordForm="ngForm">
        <div class="form-group">
          <label for="currentPassword">Current Password</label>
          <input 
            type="password" 
            id="currentPassword"
            name="currentPassword"
            [(ngModel)]="passwordData.currentPassword"
            required
          />
          <div class="error-message" *ngIf="errors.currentPassword">
            {{errors.currentPassword}}
          </div>
        </div>

        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input 
            type="password" 
            id="newPassword"
            name="newPassword"
            [(ngModel)]="passwordData.newPassword"
            required
          />
          <div class="error-message" *ngIf="errors.newPassword">
            {{errors.newPassword}}
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm New Password</label>
          <input 
            type="password" 
            id="confirmPassword"
            name="confirmPassword"
            [(ngModel)]="passwordData.confirmPassword"
            required
          />
          <div class="error-message" *ngIf="errors.confirmPassword">
            {{errors.confirmPassword}}
          </div>
        </div>

        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="isLoading"
        >
          <span *ngIf="!isLoading">Change Password</span>
          <span *ngIf="isLoading">Changing...</span>
        </button>
      </form>
    </div>

    <div class="security-info">
      <h3>Security Tips</h3>
      <ul>
        <li>Use a strong password with at least 8 characters</li>
        <li>Include uppercase, lowercase, numbers, and special characters</li>
        <li>Don't share your password with anyone</li>
        <li>Change your password regularly</li>
        <li>Log out from shared devices</li>
      </ul>
    </div>
  </div>
</div>